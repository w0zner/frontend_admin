<app-sidebar> </app-sidebar>

<div class="main-content">
    <div class="pt-1 mt-4">
        <h2 class="mt-2 mt-md-4 mb-3 pt-0"></h2>
        <div class="d-flex flex-wrap flex-md-nowrap justify-content-between">
            <p class="text-muted"></p>
        </div>
    </div>

    <div class="card box-shadow border-0 rounded-0 card-hover">
        <div class="card-header border-0 ">
            <h5 class="pt-2 pb-2" style="margin-bottom: 0px;">Detalle de venta - <span style="color: cadetblue;">#{{orden?._id}}</span></h5>
        </div>

        <div class="row">
            <div class="col-12 p-4">
                <div class="card-body py-3 box-shadow">
                    <div class="row">
                        <div class="col-lg-6">
                            <table class="table mb-0">
                                <tbody>
                                    <!-- <tr>
                                                <th class="border-0 py-2 pl-0">N° Ordén:</th>
                                                <td class="border-0 py-2 px-0 text-muted">{{orden?._id}}</td>
                                            </tr> -->
                                    <tr>
                                        <th class="border-0 py-2 pl-0">N° Venta:</th>
                                        <td class="border-0 py-2 px-0 text-muted">
                                            {{ orden?.nventa }}
                                        </td>
                                    </tr>
                                    <tr>
                                        <th class="border-0 py-2 pl-0">Forma de pago:</th>
                                        <td class="border-0 py-2 px-0 text-muted">
                                            {{ orden?.payment }}
                                        </td>
                                    </tr>
                                    <tr>
                                        <th class="border-0 py-2 pl-0">N° Transacción:</th>
                                        <td class="border-0 py-2 px-0 text-muted">
                                            {{ orden?.transaccion }}
                                        </td>
                                    </tr>
                                    <tr>
                                        <th class="border-0 py-2 pl-0">Cliente:</th>
                                        <td class="border-0 py-2 px-0 text-muted">
                                            {{ orden?.usuario?.cedula }} -
                                            {{ orden?.usuario?.nombres }}
                                            {{ orden?.usuario?.apellidos }}
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="col-lg-6">
                            <table class="table mb-0">
                                <tbody>
                                    <tr>
                                        <th class="border-0 py-2 pl-0">Tipo Envío:</th>
                                        <td class="border-0 py-2 px-0 text-muted">
                                            {{ orden?.envio_titulo }}
                                        </td>
                                    </tr>
                                    <tr>
                                        <th class="border-0 py-2 pl-0">dirección:</th>
                                        <td class="border-0 py-2 px-0 text-muted">
                                            {{ orden?.direccion?.direccion }}
                                        </td>
                                    </tr>
                                    <tr>
                                        <th class="border-0 py-2 pl-0">Ciudad:</th>
                                        <td class="border-0 py-2 px-0 text-muted">
                                            {{ orden?.direccion?.ciudad }}
                                        </td>
                                    </tr>
                                    <tr>
                                        <th class="border-0 py-2 pl-0">Fecha de ordén:</th>
                                        <td class="border-0 py-2 px-0 text-muted">
                                            {{ orden?.createdAt | date: "medium" }}
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12"></div>
        </div>

        <div class="card-body border-bottom">
            <div class="card-header accordion-heading py-1">
                <div class="d-flex flex-wrap justify-content-between py-3" data-toggle="collapse" aria-expanded="true" style="border-bottom: 1px solid #ccc;">
                    <span class="pr-2">#{{ orden?._id }}</span>
                    <!-- <span class="font-size-sm text-muted text-nowrap px-2">
                    <i class="cxi-clock font-size-base align-middle mt-n1 mr-1"></i>
                    Dec 9, 2020
                  </span> -->
                    <span class="badge badge-info">{{ orden?.estado }}</span>
                    <span class="text-dark pl-1">Total {{orden?.subtotal | currency: "PYG " : "symbol" : "1.0-0"}}</span>
                </div>
                <div id="order-1" class="collapse show" data-parent="#orders">
                    <div class="rounded mb-4">
                        <div class="table-responsive">
                            <table class="table table-hover mb-0">
                                <tbody>
                                    <tr *ngFor="let detalle of detalles">
                                        <td class="border-top-0">
                                            <div class="media pl-2 py-2">
                                                <a [routerLink]="['/productos/',detalle.producto.slug,]"
                                                    style="min-width: 80px">
                                                    <img [src]="detalle.producto.portada ? url + detalle.producto.portada : 'assets/img/default-product.png'"
                                                        width="80" alt="Product thumb" />
                                                </a>
                                                <div class="media-body pl-3">
                                                    <h3 class="font-size-sm mb-3">
                                                        <a [routerLink]="['/productos/', detalle.producto.slug,]"
                                                            class="nav-link font-weight-bold">{{ detalle.producto.titulo
                                                            }}</a>
                                                    </h3>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="border-top-0">
                                            <div class="py-2">
                                                <div class="font-size-xs text-muted mb-1">
                                                    Precio:
                                                </div>
                                                <div class="font-size-sm text-dark">
                                                    {{ detalle.producto.precio | currency: "PYG " : "symbol" : "1.0-0"
                                                    }}
                                                </div>
                                            </div>
                                        </td>
                                        <td class="border-top-0">
                                            <div class="py-2">
                                                <div class="font-size-xs text-muted mb-1">
                                                    Cantidad:
                                                </div>
                                                <div class="font-size-sm text-dark">
                                                    {{ detalle.cantidad }}
                                                </div>
                                            </div>
                                        </td>
                                        <td class="border-top-0">
                                            <div class="py-2 pr-3 text-right">
                                                <div class="font-size-xs text-muted mb-1">
                                                    Subtotal:
                                                </div>
                                                <div class="font-size-sm font-weight-bold text-dark">
                                                    {{ detalle.subtotal | currency: "PYG " : "symbol" : "1.0-0" }}
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            
                            <div *ngIf="orden?.envio_precio !== 0">
                                <div style="
                                        width: 100%;
                                        text-align: right;
                                        padding: 10px;
                                        padding-right: 24px;
                                        vertical-align: middle;
                                        ">
                                    <b style="margin: 0">Envio:
                                        {{ orden?.envio_precio | currency: "PYG " : "symbol" : "1.0-0" }}</b>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex justify-content-end align-items-center mb-4 pr-3">
                        <span class="font-weight-bold text-dark mr-3">You can track your order here</span>
                        <a href="order-tracking.html" class="btn btn-outline-primary btn-sm">Order tracking</a>
                        <a [routerLink]="['/panel/ventas']" role="button" class="btn btn-outline-secondary btn-sm"><i class="cxi-arrow-back"></i> Volver</a>
                    </div>
                </div>
            </div>

            <!-- <form [formGroup]="cuponesForm" (submit)="registrar()">


        </form> -->
        </div>
    </div>
</div>